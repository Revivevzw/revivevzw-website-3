<div class="mission-detail-page">
    @if (mission(); as m) {
    <app-page-hero [title]="m.name | localize" [subtitle]="m.country" [backgroundImage]="m.mainImage" height="500px">
    </app-page-hero>

    <main class="container mission-body">
        <app-breadcrumbs></app-breadcrumbs>
        <div class="content-layout">
            <article class="primary-content">
                <section class="mission-intro">
                    <div class="meta-info">
                        <div class="meta-item">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                <line x1="16" y1="2" x2="16" y2="6"></line>
                                <line x1="8" y1="2" x2="8" y2="6"></line>
                                <line x1="3" y1="10" x2="21" y2="10"></line>
                            </svg>
                            <span>{{ m.startDate | date:'d MMMM y' }} - {{ m.endDate | date:'d MMMM y' }}</span>
                        </div>
                    </div>

                    @if (m.description && (m.description | localize)) {
                    <h2>Over deze missie</h2>
                    <p class="lead-text">{{ m.description | localize }}</p>
                    }
                </section>

                @if (m.interventions && (m.interventions | localize)) {
                <section class="interventions">
                    <h2>Interventies</h2>
                    <div class="interventions-card">
                        <p>{{ m.interventions | localize }}</p>
                    </div>
                </section>
                }

                @if (m.showReport && m.report) {
                <section class="report">
                    <h2>Verslag</h2>
                    <div class="report-content">
                        <p>{{ m.report | localize }}</p>
                    </div>
                </section>
                }
            </article>

            <aside class="sidebar-content">
                @if (m.quote) {
                <div class="quote-card">
                    <svg class="quote-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                        viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M14.017 21L14.017 18C14.017 16.8954 14.9124 16 16.017 16H19.017C19.5693 16 20.017 15.5523 20.017 15V9C20.017 8.44772 19.5693 8 19.017 8H16.017C15.4647 8 15.017 8.44772 15.017 9V12C15.017 12.5523 14.5693 13 14.017 13H13.017C12.4647 13 12.017 12.5523 12.017 12V9C12.017 7.34315 13.3601 6 15.017 6H19.017C20.6739 6 22.017 7.34315 22.017 9V15C22.017 18.3137 19.3307 21 16.017 21H14.017ZM5.01704 21L5.01704 18C5.01704 16.8954 5.91246 16 7.01704 16H10.017C10.5693 16 11.017 15.5523 11.017 15V9C11.017 8.44772 10.5693 8 10.017 8H7.01704C6.46475 8 6.01704 8.44772 6.01704 9V12C6.01704 12.5523 5.56932 13 5.01704 13H4.01704C3.46475 13 3.01704 12.5523 3.01704 12V9C3.01704 7.34315 4.36019 6 6.01704 6H10.017C11.6739 6 13.017 7.34315 13.017 9V15C13.017 18.3137 10.3307 21 7.01704 21H5.01704Z" />
                    </svg>
                    <p class="quote-text">{{ m.quote | localize }}</p>
                </div>
                }

                @if (m.mediaUrls && m.mediaUrls.length > 0) {
                <div class="media-sidebar">
                    <h3>Media</h3>
                    <div class="media-images">
                        @for (url of m.mediaUrls; track url) {
                        <div class="media-img-wrapper">
                            <img [src]="url" alt="Mission media">
                        </div>
                        }
                    </div>
                </div>
                }
            </aside>
        </div>

        @if (m.images && m.images.length > 0) {
        <section class="gallery-section">
            <h2>Impressies</h2>
            <div class="gallery-grid">
                @for (img of m.images; track img) {
                <div class="gallery-item">
                    <img [src]="img" alt="Mission impression">
                </div>
                }
            </div>
        </section>
        }
    </main>
    } @else {
    <div class="container loading-container">
        <div class="loading-spinner"></div>
        <p>Laden van missie details...</p>
    </div>
    }
</div>